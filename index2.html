<!DOCTYPE html>
<!-- saved from url=(0024)file:///D:/!DOCTYPE.html -->
<html lang="en" data-theme="light">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>NEET 2026 Checklist</title>
  <style>
    :root {
      --bg: #0b1120;
      --bg-elevated: #020617;
      --border: #1f2937;
      --border-soft: #374151;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #3b82f6;
      --accent-soft: #22c55e;
    }

    html[data-theme="light"] {
      --bg: #f9fafb;
      --bg-elevated: #ffffff;
      --border: #e5e7eb;
      --border-soft: #cbd5f5;
      --text: #020617;
      --muted: #6b7280;
      --accent: #2563eb;
      --accent-soft: #16a34a;
      --xp-bg: #d6e4ff;
      --xp-bar: #22c55e;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
    }

    /* HEADER LAYOUT */

    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--bg-elevated);
      border-bottom: 1px solid var(--border);
      padding: 8px 16px 10px;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .header-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 120px;
    }

    .button-row {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .save-status {
      display: flex;
      flex-direction: column;
      gap: 2px;
      font-size: 10px;
      color: var(--muted);
    }

    .icon-btn-save,
    .icon-btn-undo,
    .icon-btn-redo {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      border: none;
      background: transparent;
      color: var(--text);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
    }

    .icon-btn-undo[disabled],
    .icon-btn-redo[disabled] {
      opacity: 0.4;
      cursor: default;
    }

    .title {
      font-size: 32px;
      font-weight: 700;
      text-align: center;
      flex: 1;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: max-content;
    }

    #user-name {
      font-size: 13px;
      font-weight: 600;
      opacity: 0.8;
    }

    #theme-toggle {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: transparent;
      color: inherit;
      padding: 2px 6px;
      font-size: 18px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    #history-controls {
      display: none; /* hidden because we now use icon buttons on the left */
      align-items: center;
      gap: 6px;
    }

    .btn {
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid var(--border-soft);
      background: var(--bg);
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
    }

    .btn:disabled {
      opacity: 0.4;
      cursor: default;
    }

    /* NAV ROW */

    #nav-row {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
    }

    .nav-btn {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: var(--bg);
      color: var(--text);
      padding: 9px 15px;
      font-size: 13px;
      cursor: pointer;
      white-space: nowrap;
    }

    /* TIMER + XP BAR + TOTAL PROGRESS */

    #timer-and-progress {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    #timer-row {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      justify-content: center;
      gap: 16px;
      width: 100%;
      max-width: 720px;
    }

    #global-timer {
      text-align: center;
      font-variant-numeric: tabular-nums;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      background: #111827;
      font-size: 20px;
      font-weight: 700;
      color: #f9fafb;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }

    html[data-theme="light"] #global-timer {
      background: #e5e7eb;
      color: #111827;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9);
    }

    #time-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 2px;
      font-size: 12px;
      color: var(--muted);
      min-width: 180px;
    }

    #time-meta-line1 {
      font-weight: 600;
    }

    #time-meta-line2 {
      font-size: 11px;
    }

    #time-meta-line3 {
      font-size: 11px;
      color: #22c55e;
    }

    #autosave-info {
      font-size: 12px;
      color: var(--muted);
      text-align: center;
    }

    
    #global-progress-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      max-width: 720px;
    }

    #global-progress-label {
      font-size: 14px;
      font-weight: 500;
    }

    #global-progress {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .progress-bar.global {
      height: 14px;
      border-radius: 999px;
      background: #111827;
    }

    html[data-theme="light"] .progress-bar.global {
      background: #e5e7eb;
    }

    .progress-bar {
      position: relative;
      flex: 1;
      height: 8px;
      border-radius: 999px;
      background: #111827;
      overflow: hidden;
    }

    html[data-theme="light"] .progress-bar {
      background: #e5e7eb;
    }

    .progress-fill.global {
      background: #22c55e;
    }

    .progress-fill {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      width: 0%;
      background: linear-gradient(90deg, var(--accent-soft), var(--accent));
      transition: width 0.2s ease;
    }

    .progress-text {
      min-width: 50px;
      text-align: right;
      font-weight: 600;
    }

    /* MAIN */

    main {
      padding: 16px;
      max-width: 1200px;
      margin: 0 auto;
    }

    h2 {
      margin-top: 24px;
      margin-bottom: 12px;
      font-size: 20px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 4px;
    }

    h3 {
      margin-top: 16px;
      margin-bottom: 8px;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .class-header-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .class-progress {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
    }

    .class-progress .progress-bar {
      height: 6px;
    }

    .class-progress .progress-text {
      min-width: 42px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
      margin-bottom: 4px;
      font-size: 13px;
      background: var(--bg-elevated);
      border-radius: 8px;
      overflow: hidden;
    }

    thead {
      background: #111827;
    }

    html[data-theme="light"] thead {
      background: #e5e7eb;
    }

    th,
    td {
      border-bottom: 1px solid var(--border);
      padding: 6px 8px;
      text-align: left;
    }

    th {
      font-weight: 600;
    }

    tbody tr {
      cursor: grab;
      user-select: none;
    }

    tbody tr.dragging {
      opacity: 0.5;
      background: #1f2937;
    }

    html[data-theme="light"] tbody tr.dragging {
      background: #e5e7eb;
    }

    tbody tr.completed-row {
      background: rgba(34, 197, 94, 0.08);
    }

    html[data-theme="light"] tbody tr.completed-row {
      background: rgba(34, 197, 94, 0.12);
    }

    tbody tr td input[type="checkbox"] {
      transform: scale(1.1);
    }

    tbody tr td input[type="text"] {
      width: 100%;
      padding: 2px 4px;
      border-radius: 4px;
      border: 1px solid var(--border-soft);
      background: var(--bg);
      color: var(--text);
      font-size: 12px;
    }

    .chapter-actions {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .icon-btn {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: var(--bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
    }

    .add-row {
      margin-top: 4px;
      display: flex;
      justify-content: flex-start;
    }

    .add-row-btn {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px dashed var(--border-soft);
      background: var(--bg);
      color: var(--muted);
      font-size: 12px;
      cursor: pointer;
    }

    .tooltip {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    /* Log book */

    #log-book-section {
      margin-top: 32px;
    }

    #log-book-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    #log-book-header-row h2 {
      margin-top: 0;
      margin-bottom: 0;
      border-bottom: none;
      padding-bottom: 0;
    }

    #log-controls {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
    }

    #daily-log-date {
      font-weight: 600;
    }

    #log-archive-btn {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: transparent;
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
    }

    #log-archive-panel {
      margin-top: 8px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--bg);
      display: none;
      max-height: 260px;
      overflow-y: auto;
      font-size: 12px;
    }

    #log-archive-panel h4 {
      margin: 0 0 6px;
      font-size: 13px;
    }

    #log-archive-empty {
      color: var(--muted);
    }

    #log-table {
      margin-top: 12px;
    }

    #log-table td input[type="text"] {
      font-size: 12px;
    }
  </style>
</head>

<body>
  <header>
    <div class="header-top">
      <div class="header-left">
        <div class="button-row">
          <button class="icon-btn-save" id="save-btn" title="Manual Save">ðŸ’¾</button>
          <button class="icon-btn-undo" id="undo-icon-btn" title="Undo" disabled>â†º</button>
          <button class="icon-btn-redo" id="redo-icon-btn" title="Redo" disabled>â†»</button>
          <button id="theme-toggle" type="button" aria-label="Toggle theme">
            <span id="theme-toggle-icon">ðŸ’¡</span>
          </button>
          <button id="log-archive-btn" type="button">ðŸ“‹</button>
        </div>
        <div class="save-status">
          <div id="time-meta-line2">Last autosave: just now</div>
          <div id="time-meta-line3">Efficient save: never</div>
        </div>
      </div>
      <div class="title">NEET 2026 CHECKLIST</div>
      <div class="header-right">
        <span id="user-name">RXSBXY</span>
        <div id="history-controls">
          <button class="btn" id="undo-btn">Undo</button>
          <button class="btn" id="redo-btn" disabled>Redo</button>
        </div>
      </div>
    </div>

    <div id="timer-and-progress">
      <div id="timer-row">
        <div id="global-timer">Time left: 78d 3h 55m 12s</div>
        <div id="time-meta">
        </div>
      </div>

      
      <div id="global-progress-row">
        <span id="global-progress-label">Total Progress:</span>
        <div id="global-progress">
          <div class="progress-bar global">
            <div class="progress-fill global" id="global-progress-fill" style="width: 1%;"></div>
          </div>
          <div class="progress-text" id="global-progress-text">1%</div>
        </div>
      </div>
    </div>

    <!-- Navigation buttons -->
    <div id="nav-row">
      <button class="nav-btn" onclick="scrollToId('bio11')">Bio 11</button>
      <button class="nav-btn" onclick="scrollToId('bio12')">Bio 12</button>
      <button class="nav-btn" onclick="scrollToId('chem11')">Chem 11</button>
      <button class="nav-btn" onclick="scrollToId('chem12')">Chem 12</button>
      <button class="nav-btn" onclick="scrollToId('phy11')">Phy 11</button>
      <button class="nav-btn" onclick="scrollToId('phy12-heading')">Phy 12</button>
      <button class="nav-btn" onclick="scrollToId('log-book-section')">Log Book</button>
    </div>
  </header>

  <main>
    <!-- BIOLOGY -->
    <h2 id="bio11">Biology</h2>
    <!-- Class 11 Biology -->
    <h3>Class 11 Biology</h3>
    <div class="class-header-row">
      <div class="class-progress" data-class-id="bio11">
        <span>Progress:</span>
        <div class="progress-bar">
          <div class="progress-fill" id="bio11-progress-fill" style="width: 5%;"></div>
        </div>
        <div class="progress-text" id="bio11-progress-text">5%</div>
      </div>
    </div>
    <table data-class-id="bio11">
      <thead>
        <tr>
          <th style="width:40px;">#</th>
          <th>Chapter</th>
          <th>Theory</th>
          <th>Questions</th>
          <th>Complete</th>
          <th>Remarks</th>
          <th style="width:60px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- 1â€“22 XI Bio -->
        <tr draggable="true" data-ch-id="bio11-1">
          <td>1</td>
          <td>The Living World</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-2">
          <td>2</td>
          <td>Biological Classification</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-3">
          <td>3</td>
          <td>Plant Kingdom</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-4" class="completed-row">
          <td>4</td>
          <td>Animal Kingdom</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-5">
          <td>5</td>
          <td>Morphology of Flowering Plants</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-6">
          <td>6</td>
          <td>Anatomy of Flowering Plants</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-7">
          <td>7</td>
          <td>Structural Organisation in Animals</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-8">
          <td>8</td>
          <td>Cell: The Unit of Life</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-9">
          <td>9</td>
          <td>Biomolecules</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-10">
          <td>10</td>
          <td>Cell Cycle and Cell Division</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-11">
          <td>11</td>
          <td>Transport in Plants</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-12">
          <td>12</td>
          <td>Mineral Nutrition</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-13">
          <td>13</td>
          <td>Photosynthesis in Higher Plants</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-14">
          <td>14</td>
          <td>Respiration in Plants</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-15">
          <td>15</td>
          <td>Plant Growth and Development</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-16">
          <td>16</td>
          <td>Digestion and Absorption</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-17">
          <td>17</td>
          <td>Breathing and Exchange of Gases</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-18">
          <td>18</td>
          <td>Body Fluids and Circulation</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-19">
          <td>19</td>
          <td>Excretory Products and their Elimination</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-20">
          <td>20</td>
          <td>Locomotion and Movement</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-21">
          <td>21</td>
          <td>Neural Control and Coordination</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio11-22">
          <td>22</td>
          <td>Chemical Coordination and Integration</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
      </tbody>
    </table>
    <div class="add-row">
      <button class="add-row-btn" data-class-id="bio11"><span>ï¼‹</span><span>Add Chapter</span></button>
    </div>

    <!-- Class 12 Biology -->
    <h3 id="bio12">Class 12 Biology</h3>
    <div class="class-header-row">
      <div class="class-progress" data-class-id="bio12">
        <span>Progress:</span>
        <div class="progress-bar">
          <div class="progress-fill" id="bio12-progress-fill" style="width: 0%;"></div>
        </div>
        <div class="progress-text" id="bio12-progress-text">0%</div>
      </div>
    </div>
    <table data-class-id="bio12">
      <thead>
        <tr>
          <th style="width:40px;">#</th>
          <th>Chapter</th>
          <th>Theory</th>
          <th>Questions</th>
          <th>Complete</th>
          <th>Remarks</th>
          <th style="width:60px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- 1â€“16 XII Bio -->
        <tr draggable="true" data-ch-id="bio12-1">
          <td>1</td>
          <td>Reproduction in Organisms</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-2">
          <td>2</td>
          <td>Sexual Reproduction in Flowering Plants</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-3">
          <td>3</td>
          <td>Human Reproduction</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-4">
          <td>4</td>
          <td>Reproductive Health</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-5">
          <td>5</td>
          <td>Principles of Inheritance and Variation</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-6">
          <td>6</td>
          <td>Molecular Basis of Inheritance</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-7">
          <td>7</td>
          <td>Evolution</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-8">
          <td>8</td>
          <td>Human Health and Disease</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-9">
          <td>9</td>
          <td>Strategies for Enhancement in Food Production</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-10">
          <td>10</td>
          <td>Microbes in Human Welfare</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-11">
          <td>11</td>
          <td>Biotechnology: Principles and Processes</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-12">
          <td>12</td>
          <td>Biotechnology and its Applications</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-13">
          <td>13</td>
          <td>Organisms and Populations</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-14">
          <td>14</td>
          <td>Ecosystem</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-15">
          <td>15</td>
          <td>Biodiversity and Conservation</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="bio12-16">
          <td>16</td>
          <td>Environmental Issues</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
      </tbody>
    </table>
    <div class="add-row">
      <button class="add-row-btn" data-class-id="bio12"><span>ï¼‹</span><span>Add Chapter</span></button>
    </div>

    <!-- CHEMISTRY -->
    <h2 id="chem11">Chemistry</h2>
    <!-- Class 11 Chemistry -->
    <h3>Class 11 Chemistry</h3>
    <div class="class-header-row">
      <div class="class-progress" data-class-id="chem11">
        <span>Progress:</span>
        <div class="progress-bar">
          <div class="progress-fill" id="chem11-progress-fill" style="width: 0%;"></div>
        </div>
        <div class="progress-text" id="chem11-progress-text">0%</div>
      </div>
    </div>
    <table data-class-id="chem11">
      <thead>
        <tr>
          <th>#</th>
          <th>Chapter</th>
          <th>Theory</th>
          <th>Questions</th>
          <th>Complete</th>
          <th>Remarks</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- 1â€“14 XI Chem -->
        <tr draggable="true" data-ch-id="chem11-1">
          <td>1</td>
          <td>Some Basic Concepts of Chemistry</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-2">
          <td>2</td>
          <td>Structure of Atom</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-3">
          <td>3</td>
          <td>Classification of Elements and Periodicity in Properties</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-4">
          <td>4</td>
          <td>Chemical Bonding and Molecular Structure</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-5">
          <td>5</td>
          <td>States of Matter: Gases and Liquids</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-6">
          <td>6</td>
          <td>Thermodynamics</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-7">
          <td>7</td>
          <td>Equilibrium</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-8">
          <td>8</td>
          <td>Redox Reactions</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-9">
          <td>9</td>
          <td>Hydrogen</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-10">
          <td>10</td>
          <td>The s-Block Elements</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-11">
          <td>11</td>
          <td>The p-Block Elements</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-12">
          <td>12</td>
          <td>Organic Chemistry â€“ Some Basic Principles and Techniques</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-13">
          <td>13</td>
          <td>Hydrocarbons</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem11-14">
          <td>14</td>
          <td>Environmental Chemistry</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
      </tbody>
    </table>
    <div class="add-row">
      <button class="add-row-btn" data-class-id="chem11"><span>ï¼‹</span><span>Add Chapter</span></button>
    </div>

    <!-- Class 12 Chemistry -->
    <h3 id="chem12">Class 12 Chemistry</h3>
    <div class="class-header-row">
      <div class="class-progress" data-class-id="chem12">
        <span>Progress:</span>
        <div class="progress-bar">
          <div class="progress-fill" id="chem12-progress-fill" style="width: 0%;"></div>
        </div>
        <div class="progress-text" id="chem12-progress-text">0%</div>
      </div>
    </div>
    <table data-class-id="chem12">
      <thead>
        <tr>
          <th>#</th>
          <th>Chapter</th>
          <th>Theory</th>
          <th>Questions</th>
          <th>Complete</th>
          <th>Remarks</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- 1â€“16 XII Chem -->
        <tr draggable="true" data-ch-id="chem12-1">
          <td>1</td>
          <td>The Solid State</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-2">
          <td>2</td>
          <td>Solutions</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-3">
          <td>3</td>
          <td>Electrochemistry</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-4">
          <td>4</td>
          <td>Chemical Kinetics</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-5">
          <td>5</td>
          <td>Surface Chemistry</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-6">
          <td>6</td>
          <td>General Principles and Processes of Isolation of Elements</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-7">
          <td>7</td>
          <td>p-Block Elements</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-8">
          <td>8</td>
          <td>d- and f-Block Elements</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-9">
          <td>9</td>
          <td>Coordination Compounds</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-10">
          <td>10</td>
          <td>Haloalkanes and Haloarenes</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-11">
          <td>11</td>
          <td>Alcohols, Phenols and Ethers</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-12">
          <td>12</td>
          <td>Aldehydes, Ketones and Carboxylic Acids</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-13">
          <td>13</td>
          <td>Amines</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-14">
          <td>14</td>
          <td>Biomolecules</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-15">
          <td>15</td>
          <td>Polymers</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="chem12-16">
          <td>16</td>
          <td>Chemistry in Everyday Life</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
      </tbody>
    </table>
    <div class="add-row">
      <button class="add-row-btn" data-class-id="chem12"><span>ï¼‹</span><span>Add Chapter</span></button>
    </div>

    <!-- PHYSICS -->
    <h2 id="phy11">Physics</h2>
    <!-- Class 11 Physics -->
    <h3>Class 11 Physics</h3>
    <div class="class-header-row">
      <div class="class-progress" data-class-id="phy11">
        <span>Progress:</span>
        <div class="progress-bar">
          <div class="progress-fill" id="phy11-progress-fill" style="width: 0%;"></div>
        </div>
        <div class="progress-text" id="phy11-progress-text">0%</div>
      </div>
    </div>
    <table data-class-id="phy11">
      <thead>
        <tr>
          <th>#</th>
          <th>Chapter</th>
          <th>Theory</th>
          <th>Questions</th>
          <th>Complete</th>
          <th>Remarks</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- 1â€“15 XI Phy -->
        <tr draggable="true" data-ch-id="phy11-1">
          <td>1</td>
          <td>Physical World</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-2">
          <td>2</td>
          <td>Units and Measurements</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-3">
          <td>3</td>
          <td>Motion in a Straight Line</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-4">
          <td>4</td>
          <td>Motion in a Plane</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-5">
          <td>5</td>
          <td>Laws of Motion</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-6">
          <td>6</td>
          <td>Work, Energy and Power</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-7">
          <td>7</td>
          <td>System of Particles and Rotational Motion</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-8">
          <td>8</td>
          <td>Gravitation</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-9">
          <td>9</td>
          <td>Mechanical Properties of Solids</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-10">
          <td>10</td>
          <td>Mechanical Properties of Fluids</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-11">
          <td>11</td>
          <td>Thermal Properties of Matter</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-12">
          <td>12</td>
          <td>Thermodynamics</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-13">
          <td>13</td>
          <td>Kinetic Theory</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-14">
          <td>14</td>
          <td>Oscillations</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy11-15">
          <td>15</td>
          <td>Waves</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
      </tbody>
    </table>
    <div class="add-row">
      <button class="add-row-btn" data-class-id="phy11"><span>ï¼‹</span><span>Add Chapter</span></button>
    </div>

    <!-- Class 12 Physics -->
    <h3 id="phy12-heading">Class 12 Physics</h3>
    <div class="class-header-row">
      <div class="class-progress" data-class-id="phy12">
        <span>Progress:</span>
        <div class="progress-bar">
          <div class="progress-fill" id="phy12-progress-fill" style="width: 0%;"></div>
        </div>
        <div class="progress-text" id="phy12-progress-text">0%</div>
      </div>
    </div>
    <table data-class-id="phy12">
      <thead>
        <tr>
          <th>#</th>
          <th>Chapter</th>
          <th>Theory</th>
          <th>Questions</th>
          <th>Complete</th>
          <th>Remarks</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- 1â€“15 XII Phy -->
        <tr draggable="true" data-ch-id="phy12-1">
          <td>1</td>
          <td>Electric Charges and Fields</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-2">
          <td>2</td>
          <td>Electrostatic Potential and Capacitance</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-3">
          <td>3</td>
          <td>Current Electricity</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-4">
          <td>4</td>
          <td>Moving Charges and Magnetism</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-5">
          <td>5</td>
          <td>Magnetism and Matter</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-6">
          <td>6</td>
          <td>Electromagnetic Induction</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-7">
          <td>7</td>
          <td>Alternating Current</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-8">
          <td>8</td>
          <td>Electromagnetic Waves</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-9">
          <td>9</td>
          <td>Ray Optics and Optical Instruments</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-10">
          <td>10</td>
          <td>Wave Optics</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-11">
          <td>11</td>
          <td>Dual Nature of Radiation and Matter</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-12">
          <td>12</td>
          <td>Atoms</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-13">
          <td>13</td>
          <td>Nuclei</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-14">
          <td>14</td>
          <td>Semiconductor Electronics: Materials, Devices and Simple Circuits</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
        <tr draggable="true" data-ch-id="phy12-15">
          <td>15</td>
          <td>Communication Systems</td>
          <td><input type="checkbox" data-field="theory"></td>
          <td><input type="checkbox" data-field="questions"></td>
          <td><input type="checkbox" data-field="complete"></td>
          <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
          <td class="chapter-actions"><button class="icon-btn delete-btn">Ã—</button></td>
        </tr>
      </tbody>
    </table>
    <div class="add-row">
      <button class="add-row-btn" data-class-id="phy12"><span>ï¼‹</span><span>Add Chapter</span></button>
    </div>

    <!-- HOURLY LOG BOOK -->
    <section id="log-book-section">
      <div id="log-book-header-row">
        <h2>Hourly Log Book</h2>
        <div id="log-controls">
          <span id="daily-log-date"></span>
        </div>
      </div>

      <div id="log-archive-panel">
        <h4>Archived Logs</h4>
        <div id="log-archive-empty">No archived logs yet.</div>
        <div id="log-archive-list"></div>
      </div>

      <table id="log-table">
        <thead>
          <tr>
            <th style="width:120px;">Date</th>
            <th style="width:80px;">Time</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody id="log-tbody">
          <!-- rows generated by JS -->
        </tbody>
      </table>
      <div class="tooltip">This shows only today's hourly slots. Older days move automatically to archive after 01:00 AM IST.</div>
    </section>
  </main>

  <script>
    // simple nav
    function scrollToId(id) {
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // --- State, Undo/Redo ---
    let historyStack = [];
    let futureStack = [];
    

    function saveState() {
      const data = exportState();
      historyStack.push(JSON.stringify(data));
      futureStack = [];
      updateHistoryButtons();
      updateAutosaveInfo();
    }

    // --- Autosave System ---
    let lastSaveState = '';
    let autosaveInterval;
    let efficientSaveTimeout;

    function getCurrentStateHash() {
      const data = exportState();
      return JSON.stringify(data);
    }

    function performSave(isManual = false) {
      const data = exportState();
      const currentState = JSON.stringify(data);
      
      // Always save to localStorage
      localStorage.setItem('neet-checklist-state', currentState);
      
      if (isManual) {
        // Manual save - always update efficient save time
        updateEfficientSaveInfo();
        showSaveFeedback('Manual save complete!');
      } else {
        // Check if state actually changed for efficient save
        if (currentState !== lastSaveState) {
          updateEfficientSaveInfo();
          lastSaveState = currentState;
        }
      }
      
      updateAutosaveInfo();
    }

    function updateEfficientSaveInfo() {
      const el = document.getElementById('time-meta-line3');
      if (!el) return;
      const now = new Date();
      const timeStr = formatAmPm(now);
      el.textContent = `Efficient save: ${timeStr}`;
    }

    function showSaveFeedback(message) {
      // Create a temporary feedback element
      const feedback = document.createElement('div');
      feedback.textContent = message;
      feedback.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #22c55e;
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        z-index: 1000;
        animation: fadeInOut 2s ease;
      `;
      
      // Add animation if not already present
      if (!document.querySelector('#save-feedback-style')) {
        const style = document.createElement('style');
        style.id = 'save-feedback-style';
        style.textContent = `
          @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-10px); }
            20% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
          }
        `;
        document.head.appendChild(style);
      }
      
      document.body.appendChild(feedback);
      setTimeout(() => feedback.remove(), 2000);
    }

    function startAutosave() {
      // Save initial state
      lastSaveState = getCurrentStateHash();
      
      // Set up autosave every 5 minutes (300,000 ms)
      autosaveInterval = setInterval(() => {
        performSave(false); // false = not manual
      }, 300000); // 5 minutes
      
      // Set up efficient save on changes (with debounce)
      document.addEventListener('change', handleEfficientSave);
      document.addEventListener('input', handleEfficientSave);
    }

    function handleEfficientSave() {
      clearTimeout(efficientSaveTimeout);
      efficientSaveTimeout = setTimeout(() => {
        performSave(false); // false = not manual
      }, 2000); // Wait 2 seconds after changes before efficient save
    }

    function stopAutosave() {
      if (autosaveInterval) {
        clearInterval(autosaveInterval);
      }
      if (efficientSaveTimeout) {
        clearTimeout(efficientSaveTimeout);
      }
    }

    function restoreState(jsonStr) {
      const data = JSON.parse(jsonStr);
      applyState(data);
    }

    function updateHistoryButtons() {
      const undoBtn = document.getElementById('undo-btn');
      const redoBtn = document.getElementById('redo-btn');
      const undoIcon = document.getElementById('undo-icon-btn');
      const redoIcon = document.getElementById('redo-icon-btn');

      const canUndo = historyStack.length !== 0;
      const canRedo = futureStack.length !== 0;

      undoBtn.disabled = !canUndo;
      redoBtn.disabled = !canRedo;
      undoIcon.disabled = !canUndo;
      redoIcon.disabled = !canRedo;
    }

    function performUndo() {
      if (!historyStack.length) return;
      const current = JSON.stringify(exportState());
      const prev = historyStack.pop();
      futureStack.push(current);
      restoreState(prev);
      updateAllProgress();
      updateHistoryButtons();
      updateAutosaveInfo();
    }

    function performRedo() {
      if (!futureStack.length) return;
      const current = JSON.stringify(exportState());
      const next = futureStack.pop();
      historyStack.push(current);
      restoreState(next);
      updateAllProgress();
      updateHistoryButtons();
      updateAutosaveInfo();
    }

    document.getElementById('undo-btn').addEventListener('click', performUndo);
    document.getElementById('redo-btn').addEventListener('click', performRedo);
    document.getElementById('undo-icon-btn').addEventListener('click', performUndo);
    document.getElementById('redo-icon-btn').addEventListener('click', performRedo);
    document.getElementById('save-btn').addEventListener('click', () => performSave(true));

    function exportState() {
      const classes = {};
      document.querySelectorAll('table[data-class-id]').forEach(table => {
        const cid = table.dataset.classId;
        const rows = [];
        table.querySelectorAll('tbody tr').forEach(tr => {
          rows.push({
            id: tr.dataset.chId,
            num: tr.children[0].textContent,
            title: tr.children[1].textContent,
            theory: tr.querySelector('input[data-field="theory"]').checked,
            questions: tr.querySelector('input[data-field="questions"]').checked,
            complete: tr.querySelector('input[data-field="complete"]').checked,
            remarks: tr.querySelector('input[data-field="remarks"]').value
          });
        });
        classes[cid] = rows;
      });

      return {
        classes,
        logs: {
          todayKey: currentDayKey,
          todayData: exportTodayLog(),
          archive: loadArchiveObject()
        }
      };
    }

    function applyState(data) {
      if (data.classes) {
        Object.entries(data.classes).forEach(([cid, rows]) => {
          const table = document.querySelector(`table[data-class-id="${cid}"] tbody`);
          if (!table) return;
          table.innerHTML = '';
          rows.forEach(r => {
            const tr = createRow(r.id, r.num, r.title);
            table.appendChild(tr);
            tr.querySelector('input[data-field="theory"]').checked = r.theory;
            tr.querySelector('input[data-field="questions"]').checked = r.questions;
            tr.querySelector('input[data-field="complete"]').checked = r.complete;
            tr.querySelector('input[data-field="remarks"]').value = r.remarks;
          });
        });
        rebindAllHandlers();
      }

      if (data.logs) {
        if (data.logs.todayKey === currentDayKey && Array.isArray(data.logs.todayData)) {
          applyTodayLog(data.logs.todayData);
        }
        if (data.logs.archive) {
          saveArchiveObject(data.logs.archive);
          renderArchivePanel();
        }
      }
    }

    // --- Timer till 1 May 2026 ---
    const targetDate = new Date('2026-05-01T00:00:00+05:30');

    function updateTimer() {
      const now = new Date();
      const diff = targetDate - now;
      const el = document.getElementById('global-timer');
      if (diff <= 0) {
        el.textContent = 'Exam time: 01 May 2026';
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const mins = Math.floor((diff / (1000 * 60)) % 60);
      const secs = Math.floor((diff / 1000) % 60);
      el.textContent = `               Time left: ${days}d ${hours}h ${mins}m ${secs}s`;
      updateTimeMeta(now);
    }
    setInterval(updateTimer, 1000);
    updateTimer();

    function formatAmPm(date) {
      let h = date.getHours();
      const m = date.getMinutes().toString().padStart(2, '0');
      const ampm = h >= 12 ? 'PM' : 'AM';
      h = h % 12;
      if (h === 0) h = 12;
      return `${h.toString().padStart(2, '0')}:${m} ${ampm}`;
    }

    function weekdayShort(idx) {
      return ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][idx];
    }

    function monthShort(idx) {
      return ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][idx];
    }

    function updateTimeMeta(now) {
      const line1 = document.getElementById('time-meta-line1');
      if (!line1) return;
      const day = weekdayShort(now.getDay());
      const date = now.getDate().toString().padStart(2, '0');
      const mon = monthShort(now.getMonth());
      const year = now.getFullYear();
      const timeStr = formatAmPm(now);
      line1.textContent = `${day} ${date} ${mon} ${year} â€¢ ${timeStr}`;
    }

    function updateAutosaveInfo() {
      const el = document.getElementById('time-meta-line2');
      if (!el) return;
      const now = new Date();
      const timeStr = formatAmPm(now);
      el.textContent = `Last autosave: ${timeStr}`;
    }

    // --- Progress calculations ---
    function updateAllProgress() {
      document.querySelectorAll('.class-progress').forEach(cp => {
        const cid = cp.dataset.classId;
        updateClassProgress(cid);
      });
      updateGlobalProgress();
    }

    function updateClassProgress(classId) {
      const table = document.querySelector(`table[data-class-id="${classId}"] tbody`);
      if (!table) return;
      const rows = table.querySelectorAll('tr');
      let done = 0;
      rows.forEach(tr => {
        const complete = tr.querySelector('input[data-field="complete"]');
        if (complete.checked) done++;
        tr.classList.toggle('completed-row', complete.checked);
      });
      const pct = rows.length ? Math.round((done / rows.length) * 100) : 0;
      const fill = document.getElementById(`${classId}-progress-fill`);
      const text = document.getElementById(`${classId}-progress-text`);
      if (fill && text) {
        fill.style.width = pct + '%';
        text.textContent = pct + '%';
      }
    }

    function updateGlobalProgress() {
      const allRows = document.querySelectorAll('table[data-class-id] tbody tr');
      let done = 0;
      allRows.forEach(tr => {
        if (tr.querySelector('input[data-field="complete"]').checked) done++;
      });
      const pct = allRows.length ? Math.round((done / allRows.length) * 100) : 0;
      const fill = document.getElementById('global-progress-fill');
      const text = document.getElementById('global-progress-text');
      fill.style.width = pct + '%';
      text.textContent = pct + '%';
    }

    // --- Row creation / deletion / add ---
    function createRow(id, num, title) {
      const tr = document.createElement('tr');
      tr.draggable = true;
      tr.dataset.chId = id;
      tr.innerHTML = `
      <td>${num}</td>
      <td contenteditable="true">${title}</td>
      <td><input type="checkbox" data-field="theory"></td>
      <td><input type="checkbox" data-field="questions"></td>
      <td><input type="checkbox" data-field="complete"></td>
      <td><input type="text" data-field="remarks" placeholder="Remarks..."></td>
      <td class="chapter-actions">
        <button class="icon-btn delete-btn">Ã—</button>
      </td>
    `;
      attachRowHandlers(tr);
      return tr;
    }

    function addChapter(classId) {
      saveState();
      const tableBody = document.querySelector(`table[data-class-id="${classId}"] tbody`);
      const idx = tableBody.querySelectorAll('tr').length + 1;
      const id = `${classId}-extra-${Date.now()}`;
      const tr = createRow(id, idx, 'New Chapter');
      tableBody.appendChild(tr);
      renumberClass(classId);
      updateAllProgress();
    }

    function deleteChapter(tr) {
      const classId = tr.closest('table').dataset.classId;
      saveState();
      tr.remove();
      renumberClass(classId);
      updateAllProgress();
    }

    function renumberClass(classId) {
      const rows = document.querySelectorAll(`table[data-class-id="${classId}"] tbody tr`);
      rows.forEach((tr, i) => {
        tr.children[0].textContent = i + 1;
      });
    }

    // --- Drag and drop reordering ---
    let dragSrcRow = null;

    function handleDragStart(e) {
      dragSrcRow = this;
      this.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    }

    function handleDragOver(e) {
      if (!dragSrcRow) return;
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      const target = e.target.closest('tr');
      if (!target || target === dragSrcRow || target.parentNode !== dragSrcRow.parentNode) return;
      const tbody = target.parentNode;
      const rows = Array.from(tbody.children);
      const srcIndex = rows.indexOf(dragSrcRow);
      const tgtIndex = rows.indexOf(target);
      if (srcIndex < tgtIndex) {
        tbody.insertBefore(dragSrcRow, target.nextSibling);
      } else {
        tbody.insertBefore(dragSrcRow, target);
      }
    }

    function handleDragEnd() {
      if (!dragSrcRow) return;
      const tbody = dragSrcRow.parentNode;
      const classId = tbody.closest('table').dataset.classId;
      dragSrcRow.classList.remove('dragging');
      dragSrcRow = null;
      renumberClass(classId);
      saveState();
    }

    function attachRowHandlers(tr) {
      tr.addEventListener('dragstart', handleDragStart);
      tr.addEventListener('dragover', handleDragOver);
      tr.addEventListener('dragend', handleDragEnd);

      const deleteBtn = tr.querySelector('.delete-btn');
      deleteBtn.addEventListener('click', () => deleteChapter(tr));

      tr.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.addEventListener('change', () => {
          saveState();
          updateAllProgress();
        });
      });
      tr.querySelector('input[data-field="remarks"]').addEventListener('change', () => {
        saveState();
      });
      const titleCell = tr.children[1];
      titleCell.addEventListener('blur', () => {
        saveState();
      });
    }

    function rebindAllHandlers() {
      document.querySelectorAll('table[data-class-id] tbody tr').forEach(tr => {
        tr.replaceWith(tr.cloneNode(true));
      });
      document.querySelectorAll('table[data-class-id] tbody tr').forEach(tr => {
        attachRowHandlers(tr);
      });
    }

    document.querySelectorAll('.add-row-btn').forEach(btn => {
      btn.addEventListener('click', () => addChapter(btn.dataset.classId));
    });

    document.querySelectorAll('table[data-class-id] tbody tr').forEach(tr => {
      attachRowHandlers(tr);
    });

    // --- Theme toggle ---
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleIcon = document.getElementById('theme-toggle-icon');

    function updateThemeIcon() {
      const isLight = document.documentElement.getAttribute('data-theme') === 'light';
      themeToggleIcon.textContent = isLight ? 'ðŸŒž' : 'ðŸŒ™';
    }

    themeToggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme') || 'dark';
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      updateThemeIcon();
      localStorage.setItem('neet-theme', next);
    });

    const storedTheme = localStorage.getItem('neet-theme');
    if (storedTheme) {
      document.documentElement.setAttribute('data-theme', storedTheme);
    }
    updateThemeIcon();

    // --- Log book (hourly from today till 1 May) ---
    const IST_OFFSET_MIN = 5.5 * 60;

    function toIST(date) {
      const utc = date.getTime() + (date.getTimezoneOffset() * 60000);
      return new Date(utc + IST_OFFSET_MIN * 60000);
    }

    function todayIstKey() {
      const d = toIST(new Date());
      const y = d.getFullYear();
      const m = (d.getMonth() + 1).toString().padStart(2, '0');
      const day = d.getDate().toString().padStart(2, '0');
      return `${y}-${m}-${day}`;
    }

    function formatDateForDisplay(date) {
      const d = toIST(date);
      const dd = d.getDate().toString().padStart(2, '0');
      const mm = (d.getMonth() + 1).toString().padStart(2, '0');
      const yy = d.getFullYear();
      return `${dd}-${mm}-${yy}`;
    }

    function generateHourlySlotsForDay(date) {
      const slots = [];
      const d = toIST(date);
      d.setHours(0, 0, 0, 0);
      for (let h = 0; h < 24; h++) {
        const slotDate = new Date(d.getTime() + h * 60 * 60 * 1000);
        const hh = slotDate.getHours().toString().padStart(2, '0');
        const mm = slotDate.getMinutes().toString().padStart(2, '0');
        slots.push({
          iso: slotDate.toISOString(),
          timeLabel: `${hh}:${mm}`
        });
      }
      return slots;
    }

    const currentDayKey = todayIstKey();
    const logTbody = document.getElementById('log-tbody');
    const dailyLogDateLabel = document.getElementById('daily-log-date');

    function initTodayLogTable() {
      const todayDate = toIST(new Date());
      dailyLogDateLabel.textContent = formatDateForDisplay(todayDate);
      logTbody.innerHTML = '';
      const slots = generateHourlySlotsForDay(todayDate);
      const todayKey = currentDayKey;
      let stored = loadLogObject();
      if (!stored) {
        stored = { [todayKey]: {} };
      }
      if (!stored[todayKey]) stored[todayKey] = {};
      slots.forEach(slot => {
        const dateStr = formatDateForDisplay(new Date(slot.iso));
        const tr = document.createElement('tr');
        tr.dataset.slotIso = slot.iso;
        tr.innerHTML = `
        <td>${dateStr}</td>
        <td>${slot.timeLabel}</td>
        <td><input type="text" placeholder="What I did this hour..."></td>
      `;
        const input = tr.querySelector('input[type="text"]');
        const savedVal = stored[todayKey][slot.timeLabel];
        if (savedVal) input.value = savedVal;
        input.addEventListener('change', () => {
          saveLogInput(todayKey, slot.timeLabel, input.value);
        });
        logTbody.appendChild(tr);
      });
    }

    function loadLogObject() {
      try {
        const raw = localStorage.getItem('neet-hourly-log');
        if (!raw) return null;
        return JSON.parse(raw);
      } catch (e) {
        return null;
      }
    }

    function saveLogObject(obj) {
      localStorage.setItem('neet-hourly-log', JSON.stringify(obj));
    }

    function saveLogInput(dayKey, timeLabel, value) {
      let obj = loadLogObject();
      if (!obj) obj = {};
      if (!obj[dayKey]) obj[dayKey] = {};
      obj[dayKey][timeLabel] = value;
      saveLogObject(obj);
    }

    function exportTodayLog() {
      const res = [];
      logTbody.querySelectorAll('tr').forEach(tr => {
        const dateStr = tr.children[0].textContent;
        const timeStr = tr.children[1].textContent;
        const remark = tr.querySelector('input[type="text"]').value || '';
        res.push({ date: dateStr, time: timeStr, remarks: remark });
      });
      return res;
    }

    function applyTodayLog(data) {
      if (!Array.isArray(data)) return;
      const todayKey = currentDayKey;
      let obj = loadLogObject() || {};
      obj[todayKey] = {};
      data.forEach(row => {
        if (row && row.time && typeof row.remarks === 'string') {
          obj[todayKey][row.time] = row.remarks;
        }
      });
      saveLogObject(obj);
      initTodayLogTable();
    }

    // archive structure: { "YYYY-MM-DD": [ {date,time,remarks}, ... ] }
    function loadArchiveObject() {
      try {
        const raw = localStorage.getItem('neet-hourly-log-archive');
        if (!raw) return {};
        return JSON.parse(raw);
      } catch (e) {
        return {};
      }
    }

    function saveArchiveObject(obj) {
      localStorage.setItem('neet-hourly-log-archive', JSON.stringify(obj));
    }

    function checkAndArchiveOldDays() {
      const nowIst = toIST(new Date());
      const hourIst = nowIst.getHours();
      const todayKey = todayIstKey();
      
      // Only archive if it's after 1 AM IST
      if (hourIst < 1) return;
      
      const allLogs = loadLogObject() || {};
      const archive = loadArchiveObject();
      let archivedToday = false;
      
      Object.keys(allLogs).forEach(dayKey => {
        // Skip today's logs
        if (dayKey === todayKey) return;
        
        // Archive this day's logs if not already archived
        if (!archive[dayKey]) {
          const dayObj = allLogs[dayKey];
          const dateParts = dayKey.split('-');
          const disp = `${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`;
          const entries = Object.keys(dayObj).map(t => ({
            date: disp,
            time: t,
            remarks: dayObj[t] || ''
          }));
          archive[dayKey] = entries;
          archivedToday = true;
          console.log(`Archived logs for ${dayKey}`);
        }
        
        // Remove from active logs
        delete allLogs[dayKey];
      });
      
      if (archivedToday) {
        saveArchiveObject(archive);
        saveLogObject(allLogs);
        renderArchivePanel();
        
        // Reinitialize today's log table to ensure clean state
        if (document.getElementById('log-tbody')) {
          initTodayLogTable();
        }
      }
    }

    // Set up periodic check for archiving (every minute)
    function startArchiveChecker() {
      setInterval(() => {
        checkAndArchiveOldDays();
      }, 60000); // Check every minute
    }

    function renderArchivePanel() {
      const panel = document.getElementById('log-archive-panel');
      const list = document.getElementById('log-archive-list');
      const emptyMsg = document.getElementById('log-archive-empty');
      const archive = loadArchiveObject();
      const keys = Object.keys(archive).sort();
      list.innerHTML = '';
      if (!keys.length) {
        emptyMsg.style.display = 'block';
        return;
      }
      emptyMsg.style.display = 'none';
      keys.forEach(dayKey => {
        const dayData = archive[dayKey];
        const dateParts = dayKey.split('-');
        const disp = `${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`;
        const dayDiv = document.createElement('div');
        dayDiv.style.marginBottom = '8px';
        const title = document.createElement('div');
        title.style.fontWeight = '600';
        title.style.color = '#22c55e';
        title.textContent = `${disp} (Archived - Read Only)`;
        dayDiv.appendChild(title);
        const smallTable = document.createElement('table');
        smallTable.style.width = '100%';
        smallTable.style.borderCollapse = 'collapse';
        smallTable.innerHTML = `
        <thead>
          <tr>
            <th style="width:80px;">Time</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody></tbody>
      `;
        const tb = smallTable.querySelector('tbody');
        dayData.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
          <td>${row.time}</td>
          <td>${row.remarks ? row.remarks : ''}</td>
        `;
          tb.appendChild(tr);
        });
        dayDiv.appendChild(smallTable);
        list.appendChild(dayDiv);
      });
    }

    document.getElementById('log-archive-btn').addEventListener('click', () => {
      const panel = document.getElementById('log-archive-panel');
      const isVisible = panel.style.display === 'block';
      panel.style.display = isVisible ? 'none' : 'block';
    });

    checkAndArchiveOldDays();
    initTodayLogTable();
    renderArchivePanel();
    startArchiveChecker();

    // Start autosave system
    startAutosave();

    // initial progress + autosave label
    updateAllProgress();
    updateAutosaveInfo();
  </script>
</body>
</html>
